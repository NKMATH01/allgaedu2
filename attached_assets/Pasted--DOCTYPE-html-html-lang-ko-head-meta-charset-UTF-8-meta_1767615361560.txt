<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- AI: <title> íƒœê·¸ì˜ 'ì´ë¡œìš´'ì„ í•™ìƒëª…ìœ¼ë¡œ êµì²´ -->
    <title>ì˜¬ê°€êµ­ì–´ 2025 2ì°¨ ë¯¸.ìˆ˜.ë“± [ì¤‘3] ë¬¸í•­ ë¶„ì„ - [í•™ìƒëª…] ë¶„ì„ ë³´ê³ ì„œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- PDF ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background: #f1f5f9; }
        .a4-page { 
            width: 794px; 
            min-height: 1123px; /* A4 ë†’ì´ */
            background: white; 
            margin: 20px auto; 
            padding: 60px; 
            position: relative; 
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); 
            page-break-after: always;
        }
        .section-title-report { 
            font-size: 16px; 
            font-weight: 700; 
            color: #1e293b; 
            margin-bottom: 12px; 
            padding-left: 10px; 
            border-left: 4px solid #6366f1; 
        }
        @media print { 
            body { background: white; }
            .a4-page { margin: 0; padding: 0; box-shadow: none; } 
            .pdf-download-button { display: none; }
        }
        #pdf-loading-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.6); display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 2000; color: white; text-align: center;
        }
        #pdf-loading-overlay p { margin-top: 20px; font-size: 1.2em; color: white; }
        .spinner {
            border: 8px solid #f3f3f3; border-top: 8px solid #4f46e5; 
            border-radius: 50%; width: 60px; height: 60px; animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="pdf-loading-overlay" style="display: none;">
        <div class="spinner"></div>
        <p>PDF íŒŒì¼ì„ ìƒì„± ì¤‘ì…ë‹ˆë‹¤. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”...</p>
    </div>

    <button id="pdf-download-btn" class="pdf-download-button fixed bottom-8 right-8 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-full shadow-lg transition-transform transform hover:scale-105 z-50">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block -mt-1 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
        </svg>
        PDF ë‹¤ìš´ë¡œë“œ
    </button>

    <section id="report-content">
        <!-- Page 1: ì¢…í•© í˜„í™© -->
        <div class="a4-page">
            <header class="mb-8">
                <div class="mb-3">
                    <h1 class="text-2xl font-black text-slate-800">ì˜¬ê°€êµ­ì–´ 2025 2ì°¨ ë¯¸.ìˆ˜.ë“± [ì¤‘3] ë¬¸í•­ ë¶„ì„ ì¢…í•© ë¶„ì„ ê²°ê³¼</h1>
                </div>
                <div class="h-1.5 w-full bg-gradient-to-r from-indigo-500 to-blue-500 rounded-full"></div>
                <p class="mt-3 text-xs text-slate-500">ì˜¬ê°€êµ­ì–´ 2025 2ì°¨ ë¯¸.ìˆ˜.ë“± [ì¤‘3] ë¬¸í•­ ë¶„ì„ â€¢ ê³¼ëª© ë¯¸ì§€ì • â€¢ ì˜¬ê°€êµìœ¡ ìˆ˜ëŠ¥ì—°êµ¬ì†Œ</p>
            </header>
            
            <section class="grid grid-cols-4 gap-3 mb-8 text-xs border-y border-slate-200 py-3">
                <!-- AI: studentInfo ê°ì²´ì˜ ê°’ìœ¼ë¡œ ì•„ë˜ 4ê°œ span íƒœê·¸ ë‚´ìš©ì„ ì±„ì›ë‹ˆë‹¤ -->
                <div><strong class="text-slate-500 mr-1">í•™ìƒëª…:</strong><span id="student-name" class="font-bold text-slate-700">[í•™ìƒëª…]</span></div>
                <div><strong class="text-slate-500 mr-1">í•™êµ:</strong><span id="student-school" class="font-bold text-slate-700">[í•™êµëª…]</span></div>
                <div><strong class="text-slate-500 mr-1">ì‘ì‹œì¼:</strong><span id="student-date" class="font-bold text-slate-700">[ì‘ì‹œì¼]</span></div>
                <div><strong class="text-slate-500 mr-1">í•™ë…„:</strong><span id="student-level" class="font-bold text-slate-700">[í•™ë…„]</span></div>
            </section>
            
            <section class="mb-8">
                <h2 class="section-title-report">ì„±ì  ì´ê´„ í˜„í™©</h2>
                <div class="border border-slate-200 rounded-lg p-5 flex items-center gap-5">
                    <!-- AI: scoreSummary.grade ê°’ -->
                    <div class="text-center">
                        <p class="text-sm font-bold text-slate-600">ì¢…í•© ë“±ê¸‰</p>
                        <p id="student-grade" class="text-6xl font-black text-indigo-600">[3]<span class="text-2xl font-bold text-slate-400"> ë“±ê¸‰</span></p>
                    </div>
                    <div class="w-px h-20 bg-slate-200"></div>
                    <div class="flex-1">
                        <div class="grid grid-cols-2 gap-3 text-center">
                            <!-- AI: scoreSummary.rawScore, rawScoreMax ê°’ -->
                            <div>
                                <p class="text-xs font-semibold text-slate-500">ì›ì ìˆ˜</p>
                                <p id="student-raw-score" class="text-xl font-bold text-slate-700">[75]<span class="text-sm font-medium">/[100]</span></p>
                            </div>
                            <!-- AI: scoreSummary.standardScore ê°’ -->
                            <div>
                                <p class="text-xs font-semibold text-slate-500">í‘œì¤€ì ìˆ˜</p>
                                <p id="student-standard-score" class="text-xl font-bold text-slate-700">[110]</p>
                            </div>
                            <!-- AI: scoreSummary.percentile ê°’ -->
                            <div>
                                <p class="text-xs font-semibold text-slate-500">ë°±ë¶„ìœ„</p>
                                <p id="student-percentile" class="text-xl font-bold text-slate-700">[78]<span class="text-sm font-medium">%</span></p>
                            </div>
                            <!-- AI: studentInfo.level ê°’ -->
                            <div>
                                <p class="text-xs font-semibold text-slate-500">í•™ë…„</p>
                                <p id="student-level-display" class="text-xl font-bold text-blue-600">[ì¤‘3]</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="mb-8">
                <h2 class="section-title-report">ì˜ì—­ë³„ ì ìˆ˜ í˜„í™©</h2>
                <div class="border border-slate-200 rounded-lg p-4">
                    <div class="relative h-52">
                        <!-- AI: charts.scoreChartData ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë¨ -->
                        <canvas id="scoreChart"></canvas>
                    </div>
                    <div class="flex justify-center gap-4 mt-4 text-xs">
                        <div class="flex items-center gap-1.5"><div class="w-3 h-3 bg-blue-500 rounded"></div><span class="text-slate-600">ìš°ìˆ˜ (80% ì´ìƒ)</span></div>
                        <div class="flex items-center gap-1.5"><div class="w-3 h-3 bg-green-500 rounded"></div><span class="text-slate-600">ì–‘í˜¸ (70-79%)</span></div>
                        <div class="flex items-center gap-1.5"><div class="w-3 h-3 bg-orange-500 rounded"></div><span class="text-slate-600">ë³´í†µ (60-69%)</span></div>
                        <div class="flex items-center gap-1.5"><div class="w-3 h-3 bg-red-500 rounded"></div><span class="text-slate-600">ë¯¸í¡ (60% ë¯¸ë§Œ)</span></div>
                    </div>
                </div>
            </section>
            
            <section class="mb-6">
                <h2 class="section-title-report">ë°±ë¶„ìœ„ ë¶„í¬ë„</h2>
                <div class="border border-slate-200 rounded-lg p-4">
                    <div class="relative h-44">
                        <!-- AI: charts.percentileChartData ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë¨ -->
                        <canvas id="percentileChart"></canvas>
                    </div>
                </div>
            </section>
            
            <div class="absolute bottom-10 left-0 right-0 text-center text-slate-400 text-xs">
                Â© 2025 ì˜¬ê°€êµìœ¡ ìˆ˜ëŠ¥ì—°êµ¬ì†Œ | Page 1 / 5
            </div>
        </div>

        <!-- Page 2: ì˜ì—­ë³„ ìƒì„¸ ë¶„ì„ -->
        <div class="a4-page">
            <div class="flex items-center justify-between mb-7 pb-3 border-b-2 border-indigo-600">
                <h2 class="text-xl font-black text-slate-800">ì˜ì—­ë³„ ìƒì„¸ ë¶„ì„</h2>
                <span class="text-sm text-slate-500 font-semibold">Page 2</span>
            </div>
            
            <section class="mb-8">
                <h2 class="section-title-report">ì˜ì—­ë³„ ì„±ì·¨ë„ ìƒì„¸</h2>
                <!-- AI: analysis.subjectDetails ë°°ì—´(5ê°œ)ì„ ìˆœíšŒí•˜ë©° ì•„ë˜ div ë¸”ë¡ì„ 5ë²ˆ ìƒì„±í•©ë‹ˆë‹¤ -->
                <div id="subject-details-grid" class="grid grid-cols-2 gap-4">
                    
                    <!-- [í…œí”Œë¦¿] (ì´ ë¸”ë¡ì„ 5ë²ˆ ë°˜ë³µ) -->
                    <div id="analysis-í™”ë²•" class="border-l-4 border-blue-500 bg-blue-50 p-4 rounded-r-lg">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-sm text-slate-800">[í™”ë²•]</h3>
                            <span id="score-í™”ë²•" class="text-2xl font-bold text-blue-600">[80]%</span>
                        </div>
                        <p id="score-detail-í™”ë²•" class="text-xs text-slate-600 mb-2">[ì·¨ë“ 9ì  / ë§Œì  11ì  (4/5ë¬¸í•­ ì •ë‹µ)]</p>
                        <div class="w-full bg-blue-500 bg-opacity-20 rounded-full h-2 mb-3">
                            <div id="score-bar-í™”ë²•" class="bg-blue-500 h-2 rounded-full" style="width: [80]%"></div>
                        </div>
                        <div class="text-xs text-slate-700 leading-relaxed space-y-2">
                            <p class="font-semibold text-slate-800 mb-2">ğŸ“‹ ì „ë¬¸ê°€ ë¶„ì„</p>
                            <!-- AI: analysis.subjectDetails[i].analysisText (ì•½ 3ì¤„, 150-200ì) -->
                            <p id="analysis-text-í™”ë²•" class="whitespace-pre-line">[í™”ë²• ì˜ì—­ì€ ... ìš°ìˆ˜í•œ ì„±ì·¨ë„(80%)ë¥¼ ë³´ì˜€ìŠµë‹ˆë‹¤. 
                            ë‹¤ë§Œ 'ìë£Œ í™œìš©' ìœ í˜•ì—ì„œ ì˜¤ë‹µì´...
                            ë³µí•© ì •ë³´ ì²˜ë¦¬ì˜ ì •í™•ì„±ì„ ë†’ì´ëŠ” í›ˆë ¨ì´ ìš”êµ¬ë©ë‹ˆë‹¤.]</p>
                        </div>
                    </div>
                    <!-- [/í…œí”Œë¦¿] (ë°˜ë³µ) -->

                    <!-- (ë‚˜ë¨¸ì§€ 4ê°œ ì˜ì—­ ì˜ˆì‹œ... AIê°€ ì‹¤ì œë¡œ ì±„ì›Œì•¼ í•¨) -->
                    <div id="analysis-ì‘ë¬¸" class="border-l-4 border-blue-500 bg-blue-50 p-4 rounded-r-lg">...</div>
                    <div id="analysis-ë¬¸ë²•" class="border-l-4 border-blue-500 bg-blue-50 p-4 rounded-r-lg">...</div>
                    <div id="analysis-ìˆ˜ëŠ¥ë…ì„œ" class="border-l-4 border-red-500 bg-red-50 p-4 rounded-r-lg">...</div>
                    <div id="analysis-ë¬¸í•™" class="border-l-4 border-orange-500 bg-orange-50 p-4 rounded-r-lg">...</div>
                    
                </div>
            </section>
            
            <div class="absolute bottom-10 left-0 right-0 text-center text-slate-400 text-xs">
                Â© 2025 ì˜¬ê°€êµìœ¡ ìˆ˜ëŠ¥ì—°êµ¬ì†Œ | Page 2 / 5
            </div>
        </div>

        <!-- Page 3: ê°•ì•½ì  ë¶„ì„ ë° ì´í‰ -->
        <div class="a4-page">
            <div class="flex items-center justify-between mb-7 pb-3 border-b-2 border-indigo-600">
                <h2 class="text-xl font-black text-slate-800">ì˜¬ê°€ ë¶„ì„ & í•™ìŠµ ë¡œë“œë§µ</h2>
                <span class="text-sm text-slate-500 font-semibold">Page 3</span>
            </div>
            
            <section class="mb-8">
                <h2 class="section-title-report">ê°•ì Â·ì•½ì  ì‹¬ì¸µ ë¶„ì„</h2>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <h3 class="font-bold text-sm text-indigo-700 mb-3">âœ“ ê°•ì  ì˜ì—­</h3>
                        <!-- AI: analysis.strengths ë°°ì—´ì„ ìˆœíšŒí•˜ë©° ì•„ë˜ div ë¸”ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤ -->
                        <div id="strength-analysis" class="space-y-3">
                            <!-- [í…œí”Œë¦¿] (ê°•ì  ì˜ì—­ ìˆ˜ë§Œí¼ ë°˜ë³µ) -->
                            <div class="border border-indigo-300 bg-white p-4 rounded-lg">
                                <div class="flex justify-between items-center mb-3">
                                    <p class="font-bold text-sm text-slate-800">[ì‘ë¬¸]</p>
                                    <span class="text-lg font-bold text-indigo-600">[90]%</span>
                                </div>
                                <div class="text-xs text-slate-700 leading-relaxed">
                                    <p class="font-semibold text-indigo-700 mb-2">ğŸ’ª ì „ë¬¸ê°€ ë¶„ì„</p>
                                    <!-- AI: analysis.strengths[i].analysisText (ì•½ 3ì¤„, 150-200ì) -->
                                    <p class="whitespace-pre-line">[90%ì˜ ì •ë‹µë¥ ë¡œ, 'ê³ ì³ì“°ê¸°'ë¥¼ ì œì™¸í•œ...
                                    ë¬¸ì¥ì˜ ì‚¬ì†Œí•œ ì˜¤ë¥˜ë§Œ ë³´ì™„í•œë‹¤ë©´ ì™„ë²½í•œ ìˆ˜ì¤€ì…ë‹ˆë‹¤.]</p>
                                </div>
                            </div>
                            <!-- [/í…œí”Œë¦¿] (ë°˜ë³µ) -->
                            <div class="border border-indigo-300 bg-white p-4 rounded-lg">...</div>
                        </div>
                    </div>
                    <div>
                        <h3 class="font-bold text-sm text-red-600 mb-3">âœ— ë³´ì™„ ì˜ì—­</h3>
                        <!-- AI: analysis.weaknesses ë°°ì—´ì„ ìˆœíšŒí•˜ë©° ì•„ë˜ div ë¸”ë¡ì„ ìƒì„±í•©ë‹ˆë‹¤ -->
                        <div id="weakness-analysis" class="space-y-3">
                            <!-- [í…œí”Œë¦¿] (ì•½ì  ì˜ì—­ ìˆ˜ë§Œí¼ ë°˜ë³µ) -->
                            <div class="border border-red-300 bg-white p-4 rounded-lg">
                                <div class="flex justify-between items-center mb-3">
                                    <p class="font-bold text-sm text-slate-800">[ìˆ˜ëŠ¥ë…ì„œ]</p>
                                    <span class="text-lg font-bold text-red-600">[50]%</span>
                                </div>
                                <div class="text-xs text-slate-700 leading-relaxed">
                                    <p class="font-semibold text-red-700 mb-2">âš ï¸ ì „ë¬¸ê°€ ë¶„ì„</p>
                                    <!-- AI: analysis.weaknesses[i].analysisText (ì•½ 3ì¤„, 150-200ì) -->
                                    <p class="whitespace-pre-line">[50%ì˜ ì •ë‹µë¥ ë¡œ ê°€ì¥ ì‹œê¸‰í•œ ë³´ì™„ì´ í•„ìš”í•©ë‹ˆë‹¤...
                                    ì •ë³´ë¥¼ ë‹¨ìˆœ í™•ì¸í•˜ëŠ” ìˆ˜ì¤€ì— ë¨¸ë¬¼ëŸ¬ ìˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.]</p>
                                </div>
                            </div>
                            <!-- [/í…œí”Œë¦¿] (ë°˜ë³µ) -->
                            <div class="border border-red-300 bg-white p-4 rounded-lg">...</div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="mb-8">
                <h2 class="section-title-report">ì˜¬ê°€ ë¶„ì„ ì´í‰</h2>
                <div class="border border-indigo-200 bg-indigo-50 rounded-lg p-6 flex items-start gap-5">
                    <div>
                        <svg class="w-12 h-12 text-indigo-500 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                          <path fill-rule="evenodd" d="M2.25 2.25a.75.75 0 0 0-1.5 0v1.5A.75.75 0 0 0 1.5 4.5h.75A.75.75 0 0 0 3 3.75V3h1.5A.75.75 0 0 0 5.25 2.25h-3Z M3.75 9A.75.75 0 0 1 3 9.75v1.5a.75.75 0 0 1 1.5 0v-1.5A.75.75 0 0 1 3.75 9Zm1.5 0A.75.75 0 0 0 4.5 9.75v1.5A.75.75 0 0 0 6 11.25v-1.5A.75.75 0 0 0 5.25 9Zm1.5 0A.75.75 0 0 1 6.75 9.75v1.5a.75.75 0 0 1 1.5 0v-1.5A.75.75 0 0 1 8.25 9Zm1.5 0A.75.75 0 0 0 9 9.75v1.5a.75.75 0 0 0 1.5 0v-1.5A.75.75 0 0 0 10.5 9Z" clip-rule="evenodd" />
                          <path d="M6.26.177a.75.75 0 0 1 1.06 1.06L6.802 1.75h10.448A2.25 2.25 0 0 1 19.5 4v16.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 20.5V13.802l-.482.482a.75.75 0 1 1-1.06-1.06l1.26-1.26a.75.75 0 0 1 1.06 0l1.018 1.018a.75.75 0 0 0 1.06 0l3.018-3.018a.75.75 0 0 0 0-1.06l-4.018-4.018a.75.75 0 0 0-1.06 0l-1.768 1.768A.75.75 0 0 1 6.26.177Z" />
                        </svg>
                    </div>
                    <div class="flex-1">
                        <!-- AI: analysis.olgaSummary í…ìŠ¤íŠ¸ (ì•½ 3-4 ë‹¨ë½, 600-800ì) -->
                        <div id="analysis-summary" class="space-y-3 text-sm text-slate-700 leading-relaxed">
                            <p>[ì´ë¡œìš´ í•™ìƒì€ ë³¸ 'ë¯¸ìˆ˜ë“±' ì§„ë‹¨ì—ì„œ ì›ì ìˆ˜ 75ì ì„ ê¸°ë¡í•˜ì—¬... (ì¤‘ëµ)]</p>
                            <p>[ê·¸ëŸ¬ë‚˜ ì˜¬ê°€êµ­ì–´ 'ì¤‘ë“±[ì˜¬í´ë¦¬ì–´]'ì˜ í•µì‹¬ ëª©í‘œëŠ”... (ì¤‘ëµ) 'ë…í•´ ì§€êµ¬ë ¥'ì´ ë¶€ì¡±í•˜ë‹¤ëŠ” ì‹ í˜¸ì…ë‹ˆë‹¤...]</p>
                            <p>[ë”°ë¼ì„œ ì´ë¡œìš´ í•™ìƒì˜ í–¥í›„ í•™ìŠµ ì „ëµì€ ëª…í™•í•©ë‹ˆë‹¤... (ì¤‘ëµ) ê°€ì¥ ì¤‘ìš”í•œ 'í•™ìŠµ í¬íŠ¸í´ë¦¬ì˜¤'ê°€ ë  ê²ƒì…ë‹ˆë‹¤.]</p>
                        </div>
                    </div>
                </div>
            </section>
            
            <div class="absolute bottom-10 left-0 right-0 text-center text-slate-400 text-xs">
                Â© 2025 ì˜¬ê°€êµìœ¡ ìˆ˜ëŠ¥ì—°êµ¬ì†Œ | Page 3 / 5
            </div>
        </div>
        
        <!-- Page 4: ë°ì´í„° ë¶„ì„ ë° ë¡œë“œë§µ -->
        <div class="a4-page">
            <div class="flex items-center justify-between mb-7 pb-3 border-b-2 border-indigo-600">
                <h2 class="text-xl font-black text-slate-800">ë°ì´í„° ë¶„ì„ ë° ì¤‘ì¥ê¸° ë¡œë“œë§µ</h2>
                <span class="text-sm text-slate-500 font-semibold">Page 4</span>
            </div>
            
            <section class="mb-8">
                <h2 class="section-title-report">í•™ìƒ vs í‰ê·  ë¹„êµ ë¶„ì„</h2>
                <div class="border border-slate-200 rounded-lg p-4">
                    <div class="relative h-64">
                        <!-- AI: charts.radarChartData ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë¨ -->
                        <canvas id="radarChart"></canvas>
                    </div>
                    <!-- AI: Radar ì°¨íŠ¸ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í…ìŠ¤íŠ¸ ë¶„ì„ ìš”ì•½ -->
                    <p class="text-xs text-center text-slate-600 mt-4">
                        [ë¶„ì„] 'ì´ë¡œìš´' í•™ìƒ(íŒŒë€ìƒ‰)ì€ 'í™”ë²•', 'ì‘ë¬¸', 'ë¬¸ë²•' ì˜ì—­ì—ì„œ 'ì „ì²´ í‰ê· '(íšŒìƒ‰)ì„ í¬ê²Œ ìƒíšŒí•˜ë‚˜, 
                        êµ­ì–´ì˜ í•µì‹¬ì¸ 'ìˆ˜ëŠ¥ë…ì„œ'ì™€ 'ë¬¸í•™' ì˜ì—­ì—ì„œëŠ” í‰ê·  ì´í•˜ì˜ ì„±ì·¨ë„ë¥¼ ë³´ì—¬, ì „í˜•ì ì¸ 'ê°•ì•½ ë¶ˆê· í˜•'ì„ ë³´ì…ë‹ˆë‹¤.
                    </p>
                </div>
            </section>
            
            <section>
                <h2 class="section-title-report">ì¤‘3 â†’ ê³ 3 ìˆ˜ëŠ¥ ì™„ì„± ë¡œë“œë§µ</h2>
                <!-- (ì´ ì„¹ì…˜ì€ í˜„ì¬ í•™ìƒ í•™ë…„ì— ê´€ê³„ì—†ì´ ê³ ì •ëœ ì½˜í…ì¸ ì…ë‹ˆë‹¤) -->
                <div class="space-y-3">
                    <div class="border-l-4 border-indigo-600 bg-indigo-50 p-3 rounded-r-lg">... (1ë‹¨ê³„) ...</div>
                    <div class="border-l-4 border-indigo-500 bg-indigo-50 p-3 rounded-r-lg">... (2ë‹¨ê³„) ...</div>
                    <div class="border-l-4 border-indigo-400 bg-indigo-50 p-3 rounded-r-lg">... (3ë‹¨ê³„) ...</div>
                    <div class="border-l-4 border-indigo-300 bg-indigo-50 p-3 rounded-r-lg">... (4ë‹¨ê³„) ...</div>
                </div>
            </section>
            
            <div class="absolute bottom-10 left-0 right-0 text-center text-slate-400 text-xs">
                Â© 2025 ì˜¬ê°€êµìœ¡ ìˆ˜ëŠ¥ì—°êµ¬ì†Œ | Page 4 / 5
            </div>
        </div>

        <!-- Page 5: ë§ì¶¤í˜• í•™ìŠµ ì „ëµ -->
        <div class="a4-page">
            <div class="flex items-center justify-between mb-7 pb-3 border-b-2 border-indigo-600">
                <h2 class="text-xl font-black text-slate-800">ë§ì¶¤í˜• í•™ìŠµ ì „ëµ</h2>
                <span class="text-sm text-slate-500 font-semibold">Page 5</span>
            </div>

            <section class="mb-8">
                <h2 class="section-title-report">í•™ìƒ ì„±í–¥ ë¶„ì„</h2>
                <div class="border border-indigo-200 bg-indigo-50 rounded-lg p-6 flex items-start gap-5">
                    <div>
                        <svg class="w-12 h-12 text-indigo-500 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M12 2C6.475 2 2 6.475 2 12s4.475 10 10 10 10-4.475 10-10S17.525 2 12 2ZM8.007 17.05a8.002 8.002 0 0 1-4.002-8.03A8 8 0 0 1 12.002 4.004a8 8 0 0 1 7.995 8.01 8 8 0 0 1-8.01 7.995 8.002 8.002 0 0 1-3.988-1.004.75.75 0 0 0 .011.004Zm8.948-2.31a.75.75 0 0 0 .15-.098A5.502 5.502 0 0 0 18.5 8.5a5.5 5.5 0 0 0-11 0 5.502 5.502 0 0 0 1.395 6.142.75.75 0 0 0 .95.274 6.978 6.978 0 0 1 7.31 0 .75.75 0 0 0 .95-.274ZM12 11a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/>
                        </svg>
                    </div>
                    <div class="flex-1">
                        <!-- AI: analysis.propensity.typeTitle -->
                        <h3 id="propensity-type-title" class="text-lg font-bold text-indigo-800 mb-2">[ì¤‘ìœ„ê¶Œ íŠ¹ì„± (ë…í•´ ì§€êµ¬ë ¥ ë³´ì™„ í•„ìš”)]</h3>
                        <!-- AI: analysis.propensity.typeDescription (HTML <strong> íƒœê·¸ í¬í•¨) -->
                        <p id="propensity-type-description" class="text-sm text-slate-700 leading-relaxed">
                            [ì´ë¡œìš´ í•™ìƒì˜ ì„±ì  ë¶„í¬ëŠ” <strong class="font-bold text-indigo-700">'ì¤‘ìœ„ê¶Œ íŠ¹ì„±(ì§€êµ¬ë ¥ ë³´ì™„ í•„ìš”í˜•)'</strong>ì— í•´ë‹¹í•©ë‹ˆë‹¤. 
                            ì´ëŠ” ê·œì¹™ì„ ì•”ê¸°í•˜ê³ ... (ì¤‘ëµ) <strong class="font-bold text-indigo-700">'ë…í•´ ì§€êµ¬ë ¥'</strong>ì´ ìƒëŒ€ì ìœ¼ë¡œ ë¶€ì¡±í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤...]
                        </p>
                    </div>
                </div>
            </section>
            
            <section class="mb-8">
                <h2 class="section-title-report">12ì£¼ ì§‘ì¤‘ í•™ìŠµ ì „ëµ</h2>
                <!-- AI: 12ì£¼ ì „ëµì€ í•™ìƒì˜ ì•½ì  ì˜ì—­ì„ ê¸°ë°˜ìœ¼ë¡œ ë™ì  ìƒì„±ë  ìˆ˜ ìˆìœ¼ë‚˜, í˜„ì¬ëŠ” ì˜ˆì‹œë¡œ ê³ ì • -->
                <table class="w-full text-left border-collapse text-xs">
                    <thead> ... </thead>
                    <tbody>
                        <tr class="border-b border-slate-100 align-top">
                            <td class="p-2 text-slate-700 font-bold">1ë‹¨ê³„<br/>(4ì£¼)</td>
                            <td class="p-2 text-slate-700 font-bold">ìˆ˜ëŠ¥ë…ì„œ ì§‘ì¤‘ ê³µëµ</td>
                            <td class="p-2 text-slate-700">ì•½ì ì¸ 'ìˆ˜ëŠ¥ë…ì„œ'ì˜ ê¸´ ì§€ë¬¸ ë…í•´ í›ˆë ¨. ë§¤ì¼ 2ê°œ ì§€ë¬¸ì”© ì‹œê°„ ë‚´ì— í’€ê³  'ì¶”ë¡ ' ìœ í˜• ì˜¤ë‹µ ë¶„ì„.</td>
                            <td class="p-2 text-slate-700">ë…ì„œ ì •ë‹µë¥  70% ë‹¬ì„±<br/>+10ì  ìƒìŠ¹</td>
                        </tr>
                        <tr class="border-b border-slate-100 align-top"> ... (2ë‹¨ê³„) ... </tr>
                        <tr class="border-b border-slate-100 align-top"> ... (3ë‹¨ê³„) ... </tr>
                    </tbody>
                </table>
            </section>
            
            <section class="mb-8">
                <h2 class="section-title-report">ì„±ì  í–¥ìƒ ì˜ˆì¸¡ ê·¸ë˜í”„</h2>
                <div class="border border-slate-200 rounded-lg p-4">
                    <div class="relative h-52">
                        <!-- AI: charts.predictionChartData ê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë¨ -->
                        <canvas id="predictionChart"></canvas>
                    </div>
                </div>
            </section>
            
            <section>
                <div class="bg-gradient-to-br from-indigo-600 to-blue-600 text-white rounded-lg p-5 text-center">
                    <p class="text-base font-bold mb-2">ëª©í‘œ ë‹¬ì„± ê°€ëŠ¥ì„±: <span class="text-yellow-300">ë†’ìŒ</span></p>
                    <p id="final-comment" class="text-xs opacity-95 leading-relaxed">[ì´ë¡œìš´ í•™ìƒì€ ê°•ì ì´ ëª…í™•í•©ë‹ˆë‹¤. ì œì‹œëœ 'ë…í•´ë ¥' ë³´ì™„ ì „ëµì„ ì„±ì‹¤íˆ ë”°ë¥¸ë‹¤ë©´ ëª©í‘œ ë“±ê¸‰ ë‹¬ì„±ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.]</p>
                </div>
            </section>
            
            <div class="absolute bottom-10 left-0 right-0 text-center text-slate-400 text-xs">
                Â© 2025 ì˜¬ê°€êµìœ¡ ìˆ˜ëŠ¥ì—°êµ¬ì†Œ | Page 5 / 5
            </div>
        </div>
    </section>

    <!-- [ìˆ˜ì •ë¨] ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ë¥¼ DOMContentLoadedë¡œ ë˜í•‘ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            // --- AIê°€ JSONìœ¼ë¡œ ì œê³µí•  ë°ì´í„° (ì˜ˆì‹œ) ---
            const reportData = {
                studentInfo: { name: "ì´ë¡œìš´", school: "ë‹¤ì‚°ì¤‘", date: "2025. 11. 15.", level: "ì¤‘3" },
                scoreSummary: { grade: "3", rawScore: "75", rawScoreMax: "100", standardScore: "110", percentile: "78" },
                charts: {
                    scoreChartData: [80, 90, 85, 50, 60],
                    percentileChartData: { studentPercentile: 78, cumulativeData: [0, 15, 35, 60, 85, 100] },
                    radarChartData: { student: [80, 90, 85, 50, 60], average: [65.0, 78.5, 55.2, 60.1, 62.3] },
                    predictionChartData: [75, 80, 85, 90]
                }
                // ... analysis ê°ì²´ëŠ” HTMLì— ì§ì ‘ ì£¼ì…ë¨ (ì´ í…œí”Œë¦¿ì—ì„œëŠ” ì˜ˆì‹œë¡œ í•˜ë“œì½”ë”©ë¨)
            };
            // --- ë°ì´í„° ì£¼ì… ì˜ˆì‹œ (ì‹¤ì œë¡œëŠ” AIê°€ ìƒì„±í•œ JSONì„ ì‚¬ìš©) ---
            // document.getElementById('student-name').textContent = reportData.studentInfo.name;
            // document.getElementById('student-raw-score').textContent = reportData.scoreSummary.rawScore;
            // ...
            
            // Page 1: Score Chart
            const ctx1 = document.getElementById('scoreChart');
            if (ctx1) {
                // AI: charts.scoreChartData ì‚¬ìš©
                const percentages = reportData.charts.scoreChartData; 
                const barColors = percentages.map(p => {
                    if (p >= 80) return 'rgb(59, 130, 246)';
                    if (p >= 70) return 'rgb(34, 197, 94)';
                    if (p >= 60) return 'rgb(249, 115, 22)';
                    return 'rgb(239, 68, 68)';
                });
                new Chart(ctx1, {
                    type: 'bar',
                    data: {
                        labels: ["í™”ë²•","ì‘ë¬¸","ë¬¸ë²•","ìˆ˜ëŠ¥ë…ì„œ","ë¬¸í•™"],
                        datasets: [{ label: 'ì •ë‹µë¥  (%)', data: percentages, backgroundColor: barColors, borderRadius: 6 }]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        scales: { y: { beginAtZero: true, max: 100, ticks: { callback: value => value + '%' } } },
                        plugins: { legend: { display: false } }
                    }
                });
            }

            // Page 1: Percentile Chart
            const ctx2 = document.getElementById('percentileChart');
            if (ctx2) {
                // AI: charts.percentileChartData ì‚¬ìš©
                const { studentPercentile, cumulativeData } = reportData.charts.percentileChartData;
                const percentilePoints = [0, 20, 40, 60, 80, 100];
                let studentYValue = 0;
                // ... (Yê°’ ê³„ì‚° ë¡œì§) ...
                for (let i = 0; i < percentilePoints.length - 1; i++) {
                    if (studentPercentile >= percentilePoints[i] && studentPercentile <= percentilePoints[i + 1]) {
                        const x0 = percentilePoints[i], x1 = percentilePoints[i + 1], y0 = cumulativeData[i], y1 = cumulativeData[i + 1];
                        studentYValue = y0 + (y1 - y0) * (studentPercentile - x0) / (x1 - x0); break;
                    }
                }
                if (studentPercentile > percentilePoints[percentilePoints.length - 1]) { studentYValue = cumulativeData[cumulativeData.length - 1]; }

                new Chart(ctx2, {
                    type: 'line',
                    data: {
                        labels: percentilePoints.map(p => p + '%'),
                        datasets: [
                            { label: 'ëˆ„ì  ë¶„í¬', data: cumulativeData, borderColor: 'rgb(99, 102, 241)', backgroundColor: 'rgba(99, 102, 241, 0.1)', fill: true, tension: 0.4 },
                            { label: 'í•™ìƒ ìœ„ì¹˜ (' + studentPercentile + '%)', data: [], borderColor: 'rgb(239, 68, 68)', backgroundColor: 'rgb(239, 68, 68)', pointRadius: 10, pointHoverRadius: 12, showLine: false, parsing: false, data: [{x: studentPercentile, y: studentYValue}] }
                        ]
                    },
                    options: {
                        responsive: true, maintainAspectRatio: false,
                        plugins: { legend: { display: true, position: 'top' } },
                        scales: { x: { type: 'linear', min: 0, max: 100, ticks: { callback: value => value + '%' } }, y: { min: 0, max: 100 } }
                    }
                });
            }

            // Page 4: Radar Chart
            const ctx3 = document.getElementById('radarChart');
            if (ctx3) {
                // AI: charts.radarChartData ì‚¬ìš©
                const { student, average } = reportData.charts.radarChartData;
                new Chart(ctx3, {
                    type: 'radar',
                    data: {
                        labels: ["í™”ë²•","ì‘ë¬¸","ë¬¸ë²•","ìˆ˜ëŠ¥ë…ì„œ","ë¬¸í•™"],
                        datasets: [
                            { label: 'í•™ìƒ', data: student, borderColor: 'rgb(99, 102, 241)', backgroundColor: 'rgba(99, 102, 241, 0.2)' },
                            { label: 'ì „ì²´ í‰ê· ', data: average, borderColor: 'rgb(100, 116, 139)', backgroundColor: 'rgba(100, 116, 139, 0.2)' }
                        ]
                    },
                    options: { responsive: true, maintainAspectRatio: false, scales: { r: { beginAtZero: true, max: 100 } } }
                });
            }

            // Page 5: Prediction Chart
            const ctx4 = document.getElementById('predictionChart');
            if (ctx4) {
                // AI: charts.predictionChartData ì‚¬ìš©
                const predData = reportData.charts.predictionChartData;
                new Chart(ctx4, {
                    type: 'line',
                    data: {
                        labels: ['í˜„ì¬', '4ì£¼ í›„', '8ì£¼ í›„', '12ì£¼ í›„'],
                        datasets: [{ label: 'ì˜ˆìƒ ì ìˆ˜', data: predData, borderColor: 'rgb(34, 197, 94)', backgroundColor: 'rgba(34, 197, 94, 0.1)', fill: true, tension: 0.4 }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, scales: { y: { min: 50, max: 100 } } }
                });
            }
            
            // PDF ë‹¤ìš´ë¡œë“œ í•¨ìˆ˜
            async function downloadPDF() {
                const loadingOverlay = document.getElementById('pdf-loading-overlay');
                loadingOverlay.style.display = 'flex';
                try {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF('p', 'mm', 'a4');
                    const pages = document.querySelectorAll('.a4-page');
                    const pageWidth = 210; const pageHeight = 297;

                    for (let i = 0; i < pages.length; i++) {
                        const canvas = await html2canvas(pages[i], { scale: 2, useCORS: true, logging: false });
                        const imgData = canvas.toDataURL('image/png', 0.98);
                        if (i > 0) { doc.addPage(); }
                        doc.addImage(imgData, 'PNG', 0, 0, pageWidth, pageHeight, undefined, 'FAST');
                    }
                    const studentName = document.getElementById('student-name').textContent || 'í•™ìƒ';
                    doc.save(`ì˜¬ê°€êµ­ì–´_ë¶„ì„ë³´ê³ ì„œ_${studentName}.pdf`);
                } catch (error) {
                    console.error("PDF ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:", error);
                    alert("PDF íŒŒì¼ì„ ìƒì„±í•˜ëŠ” ë° ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
                } finally {
                    loadingOverlay.style.display = 'none';
                }
            }

            // PDF ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
            const downloadButton = document.getElementById('pdf-download-btn');
            if(downloadButton) {
                downloadButton.addEventListener('click', downloadPDF);
            }

        }); // DOMContentLoaded ë‹«ê¸°
    </script>
</body>
</html>